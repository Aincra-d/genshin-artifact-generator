<template>
	<div>
		<b-dropdown
        class="m-0 sort-inventory"
        :size="screen < 576 ? 'md' : 'lg'"
        variant="link">
            <template v-slot:button-content>
                <i class="fas fa-sort sort-icon"></i>
            </template>

            <b-dropdown-item
            :key="i"
            v-for="(sort,i) in sorts"
            @click="sortInventory(sorts[i].name,sorts[i].type)">
                <i
                class="fas mr-2"
                :class="sort.icon">
                </i>
                
                <span>{{sort.title}}</span>
            </b-dropdown-item>
        </b-dropdown>
	</div>
</template>

<script>
	export default{
		name: 'sortInventory',
		computed: {
			artifacts(){
                return this.$store.state.artifacts.artifacts
            },
            screen(){
                return this.$store.state.artifacts.screen
            }
		},
		methods: {
			sortInventory(name,type){
                let artifacts=this.artifacts.sort((a, b) => type == 'desc'
                    ? parseFloat(b.stats.subs.filter(sub => sub.name == name)[0]
                        ? b.stats.subs.filter(sub => sub.name == name)[0].value : 0)
                    -
                    parseFloat(a.stats.subs.filter(sub => sub.name == name)[0]
                        ? a.stats.subs.filter(sub => sub.name == name)[0].value : 0)

                    : parseFloat(a.stats.subs.filter(sub => sub.name == name)[0]
                        ? a.stats.subs.filter(sub => sub.name == name)[0].value : 0)
                    -
                    parseFloat(b.stats.subs.filter(sub => sub.name == name)[0]
                        ? b.stats.subs.filter(sub => sub.name == name)[0].value : 0)
                    );

                this.$store.commit('artifacts/setArtifacts',artifacts);
            }
		},
		data(){
			return {
				sorts: [
                    {
                        name: 'HP',
                        type: 'desc',
                        icon: 'text-danger',
                        title: '‚ù§Ô∏è Sort by HP (desc ‚¨á)'
                    },
                    {
                        name: 'HP',
                        type: 'asc',
                        icon: 'text-danger',
                        title: '‚ù§Ô∏è Sort by HP (asc ‚¨Ü)'
                    },
                    {
                        name: 'HP%',
                        type: 'desc',
                        icon: 'text-danger',
                        title: '‚ù§Ô∏è Sort by HP% (desc ‚¨á)'
                    },
                    {
                        name: 'HP%',
                        type: 'asc',
                        icon: 'text-danger',
                        title: '‚ù§Ô∏è Sort by HP% (asc ‚¨Ü)'
                    },
                    {
                        name: 'DEF',
                        type: 'desc',
                        icon: 'text-primary',
                        title: 'üõ°Ô∏è Sort by DEF (desc ‚¨á)'
                    },
                    {
                        name: 'DEF',
                        type: 'asc',
                        icon: 'text-primary',
                        title: 'üõ°Ô∏è Sort by DEF (asc ‚¨Ü)'
                    },
                    {
                        name: 'DEF%',
                        type: 'desc',
                        icon: 'text-primary',
                        title: 'üõ°Ô∏è Sort by DEF% (desc ‚¨á)'
                    },
                    {
                        name: 'DEF%',
                        type: 'asc',
                        icon: 'text-primary',
                        title: 'üõ°Ô∏è Sort by DEF% (asc ‚¨Ü)'
                    },
                    {
                        name: 'ATK',
                        type: 'desc',
                        icon: 'text-primary',
                        title: '‚öîÔ∏è Sort by ATK (desc ‚¨á)'
                    },
                    {
                        name: 'ATK',
                        type: 'asc',
                        icon: 'text-primary',
                        title: '‚öîÔ∏è Sort by ATK (asc ‚¨Ü)'
                    },
                    {
                        name: 'ATK%',
                        type: 'desc',
                        icon: 'text-primary',
                        title: '‚öîÔ∏è Sort by ATK% (desc ‚¨á)'
                    },
                    {
                        name: 'ATK%',
                        type: 'asc',
                        icon: 'text-primary',
                        title: '‚öîÔ∏è Sort by ATK% (asc ‚¨Ü)'
                    },
                    {
                        name: 'Energy Recharge%',
                        type: 'desc',
                        icon: 'text-primary',
                        title: '‚ö° Sort by Energy Recharge% (desc ‚¨á)'
                    },
                    {
                        name: 'Energy Recharge%',
                        type: 'asc',
                        icon: 'text-primary',
                        title: '‚ö° Sort by Energy Recharge% (asc ‚¨Ü)'
                    },
                    {
                        name: 'Elemental Mastery',
                        type: 'desc',
                        icon: 'text-primary',
                        title: 'üî• Sort by Elemental Mastery (desc ‚¨á)'
                    },
                    {
                        name: 'Elemental Mastery',
                        type: 'asc',
                        icon: 'text-primary',
                        title: 'üî• Sort by Elemental Mastery (asc ‚¨Ü)'
                    },
                    {
                        name: 'CRIT Rate%',
                        type: 'desc',
                        icon: 'text-primary',
                        title: 'üéØ Sort by CRIT Rate% (desc ‚¨á)'
                    },
                    {
                        name: 'CRIT Rate%',
                        type: 'asc',
                        icon: 'text-primary',
                        title: 'üéØ Sort by CRIT Rate% (asc ‚¨Ü)'
                    },
                    {
                        name: 'CRIT DMG%',
                        type: 'desc',
                        icon: 'text-primary',
                        title: 'üéØ Sort by CRIT DMG% (desc ‚¨á)'
                    },
                    {
                        name: 'CRIT DMG%',
                        type: 'asc',
                        icon: 'text-primary',
                        title: 'üéØ Sort by CRIT DMG% (asc ‚¨Ü)'
                    },
                ]
			}
		}
	}
</script>